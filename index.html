<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>p5.js Canvas</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
</head>
<body>
    <script>
        let C_real_min=-2.0
        let C_real_max=1
        let C_img_min=-1.5
        let C_img_max=1.5
        let delta_C_real = (C_real_max - C_real_min) / 640
        let delta_C_img = (C_img_max - C_img_min) / 640
        let maxiter= 256
        function setup() {
            createCanvas(640, 640);
            pixelDensity(1);
            loadPixels();

            for (let xcoord = 0; xcoord < 640; xcoord++) {
                for (let ycoord = 0; ycoord < 640; ycoord++) {
                    let a = C_real_min + xcoord * delta_C_real;
                    let bi = C_img_min + ycoord * delta_C_img;
                    let u = 0;
                    let v = 0;
                    let i = 0;
                    while (u * u + v * v < 4 && i < maxiter) {
                        let temp = u * u - v * v + a;
                        v = 2 * u * v + bi;
                        u = temp;
                        i = i + 1;
                    }

                    let idx = (xcoord + ycoord * 640) * 4;
                    if (i == maxiter) {
                        //rgb for bound points
                        pixels[idx] = 0;
                        pixels[idx + 1] = 0;
                        pixels[idx + 2] = 0;
                    } else {
                        //rgb for escaping points
                        pixels[idx] = i%4*85;
                        pixels[idx + 1] = 255-(i%5)*64;
                        pixels[idx + 2] = 50+(i%6)*40;
                    }
                    pixels[idx + 3] = 255; // alpha
                }
            }

            updatePixels();
            noLoop();
        }

        function draw() {
            // rendering is done in setup()
        }
    </script>
</body>
</html>
